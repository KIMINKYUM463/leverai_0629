"use client"

import { useState } from "react"
import { Tabs, TabsContent, TabsList, TabsTrigger } from "@/components/ui/tabs"
import { Card, CardContent, CardDescription, CardFooter, CardHeader, CardTitle } from "@/components/ui/card"
import { Button } from "@/components/ui/button"
import { Badge } from "@/components/ui/badge"
import { Calendar, Download, Eye, FileText, Tag } from "lucide-react"
import { MaterialDetail } from "./material-detail"

// 샘플 학습 자료 데이터
const weeklyMaterials = {
  week1: [
    {
      id: "m1-1",
      title: "농산물 시장 개요 및 트렌드",
      description: "국내 농산물 시장의 현황과 최신 트렌드에 대한 개요 자료입니다.",
      date: "2025-05-16",
      type: "PDF",
      size: "2.4MB",
      tags: ["시장 분석", "트렌드"],
      content: `
        # 농산물 시장 개요 및 트렌드

        ## 국내 농산물 시장 현황
        
        국내 농산물 시장은 최근 몇 년간 지속적인 변화를 겪고 있습니다. 특히 코로나19 이후 온라인 유통 채널의 성장이 두드러지고 있으며, 소비자들의 구매 패턴도 크게 변화하고 있습니다.

        ## 주요 트렌드

        1. **온라인 유통 채널의 성장**
           - 모바일 앱을 통한 신선 농산물 구매 증가
           - 새벽 배송 서비스의 확대

        2. **친환경 농산물 수요 증가**
           - 유기농, 무농약 농산물에 대한 관심 증가
           - 지속가능한 농업에 대한 소비자 인식 변화

        3. **로컬 푸드 운동의 확산**
           - 지역 농산물 직거래 시장 활성화
           - 푸드 마일리지에 대한 관심 증가

        ## 시장 규모

        국내 농산물 시장은 2024년 기준 약 45조원 규모로 추정되며, 이 중 온라인 유통 채널을 통한 거래액은 약 8조원으로 전년 대비 15% 증가했습니다.
      `,
    },
    {
      id: "m1-2",
      title: "농산물 유통 체계의 이해",
      description: "농산물이 생산자부터 소비자까지 전달되는 유통 체계에 대한 상세 자료입니다.",
      date: "2025-05-17",
      type: "PDF",
      size: "3.1MB",
      tags: ["유통", "공급망"],
      content: `
        # 농산물 유통 체계의 이해

        ## 농산물 유통 구조

        농산물 유통은 크게 도매 유통과 소매 유통으로 나눌 수 있습니다. 전통적인 유통 경로는 생산자 → 산지유통인 → 도매시장 → 소매상 → 소비자로 이어지는 다단계 구조를 가지고 있습니다.

        ## 주요 유통 채널

        1. **도매시장**
           - 가락시장, 강서시장 등 대규모 도매시장
           - 경매를 통한 가격 결정 메커니즘

        2. **대형 유통업체**
           - 대형마트, 슈퍼마켓 체인
           - 산지 직거래를 통한 유통 단계 축소

        3. **온라인 플랫폼**
           - 이커머스 플랫폼
           - 식품 전문 배달 서비스

        4. **직거래 유통**
           - 농민 장터, 로컬 푸드 직매장
           - 소비자와 생산자 간 직접 연결

        ## 유통 마진 구조

        일반적인 농산물 유통 과정에서 발생하는 마진은 다음과 같이 분포됩니다:
        - 생산자 수취 가격: 최종 소비자 가격의 약 50-60%
        - 유통 마진: 약 40-50% (도매 마진 15-20%, 소매 마진 25-30%)

        이러한 다단계 유통 구조는 가격 상승의 원인이 되기도 하며, 이를 개선하기 위한 다양한 정책과 시도가 진행되고 있습니다.
      `,
    },
  ],
  week2: [
    {
      id: "m2-1",
      title: "농산물 마케팅 전략 가이드",
      description: "농산물의 효과적인 마케팅 전략 수립을 위한 가이드라인과 사례 분석입니다.",
      date: "2025-05-23",
      type: "PDF",
      size: "4.2MB",
      tags: ["마케팅", "브랜딩"],
      content: `
        # 농산물 마케팅 전략 가이드

        ## 농산물 마케팅의 특수성

        농산물 마케팅은 일반 소비재와 달리 계절성, 신선도, 품질 변동성 등의 특수한 요소를 고려해야 합니다. 이러한 특성을 이해하고 활용하는 것이 성공적인 마케팅의 핵심입���다.

        ## 효과적인 마케팅 전략

        1. **스토리텔링 마케팅**
           - 생산자의 이야기와 농산물의 생산 과정을 강조
           - 소비자와의 감성적 연결 구축

        2. **차별화 전략**
           - 지리적 표시, 특산품 인증 등을 활용한 차별화
           - 품질, 신선도, 안전성 등의 가치 제안

        3. **디지털 마케팅**
           - SNS를 활용한 농산물 홍보
           - 콘텐츠 마케팅을 통한 인지도 향상

        4. **체험 마케팅**
           - 농장 체험, 수확 체험 등의 프로그램 운영
           - 소비자 참여형 이벤트 기획

        ## 성공 사례 분석

        ### 사례 1: 완주 로컬푸드

        완주군의 로컬푸드 직매장은 '얼굴 있는 농산물'이라는 컨셉으로 생산자 정보를 투명하게 공개하고, 지역 농산물의 가치를 효과적으로 전달하여 성공적인 브랜드를 구축했습니다.

        ### 사례 2: 제주 감귤 브랜딩

        제주 감귤은 지역 특산품으로서의 정체성을 강화하고, 다양한 가공품 개발과 체험 관광을 연계한 통합 마케팅으로 부가가치를 높였습니다.
      `,
    },
  ],
  week3: [
    {
      id: "m3-1",
      title: "농산물 브랜딩 전략과 패키지 디자인",
      description: "농산물의 브랜드 가치를 높이기 위한 전략과 효과적인 패키지 디자인 가이드입니다.",
      date: "2025-05-30",
      type: "PDF",
      size: "5.7MB",
      tags: ["브랜딩", "디자인"],
      content: `
        # 농산물 브랜딩 전략과 패키지 디자인

        ## 농산물 브랜딩의 중요성

        브랜딩은 단순한 로고나 이름을 넘어 소비자가 제품에 대해 가지는 전체적인 인식과 경험을 의미합니다. 농산물 시장에서의 경쟁이 심화됨에 따라, 효과적인 브랜딩은 제품의 차별화와 부가가치 창출에 핵심적인 역할을 합니다.

        ## 농산물 브랜드 개발 프로세스

        1. **브랜드 아이덴티티 정의**
           - 핵심 가치와 차별점 도출
           - 타겟 소비자 분석

        2. **브랜드 네이밍**
           - 기억하기 쉽고 의미 있는 이름 개발
           - 지역성, 특성을 반영한 네이밍

        3. **시각적 아이덴티티 개발**
           - 로고, 컬러 팔레트, 타이포그래피 등 개발
           - 일관된 브랜드 이미지 구축

        4. **브랜드 스토리 개발**
           - 생산 지역, 방식, 역사 등을 활용한 스토리텔링
           - 소비자와의 감성적 연결 구축

        ## 효과적인 패키지 디자인 원칙

        1. **가시성과 인지도**
           - 매장 진열대에서 눈에 띄는 디자인
           - 브랜드 요소의 일관된 적용

        2. **정보 전달**
           - 제품 정보의 명확한 전달
           - 인증, 원산지 등 중요 정보의 강조

        3. **기능성**
           - 제품 보호와 신선도 유지
           - 사용 편의성 고려

        4. **지속가능성**
           - 환경 친화적 소재 사용
           - 재활용 가능한 디자인

        ## 성공적인 농산물 패키지 디자인 사례

        ### 사례 1: 임실 치즈

        임실 치즈는 지역의 특성과 전통을 현대적 디자인으로 재해석하여, 프리미엄 이미지를 성공적으로 구축했습니다. 심플한 로고와 깨끗한 패키지 디자인으로 품질에 대한 신뢰를 전달합니다.

        ### 사례 2: 영월 동강 사과

        영월 동강 사과는 지역의 청정 자연환경을 강조한 패키지 디자인으로, 프리미엄 선물용 시장에서 성공적으로 포지셔닝했습니다. 투명한 패키지를 통해 제품의 품질을 직접 확인할 수 있게 하여 소비자 신뢰를 높였습니다.
      `,
    },
    {
      id: "m3-2",
      title: "농산물 온라인 판매 채널 분석",
      description: "다양한 온라인 판매 채널의 특성과 효과적인 활용 방안에 대한 분석 자료입니다.",
      date: "2025-06-01",
      type: "PDF",
      size: "3.8MB",
      tags: ["온라인", "판매 채널"],
      content: `
        # 농산물 온라인 판매 채널 분석

        ## 농산물 온라인 시장 현황

        코로나19 이후 농산물 온라인 시장은 급격한 성장을 보이고 있습니다. 2024년 기준 농산물 온라인 거래액은 약 8조원으로, 전체 농산물 유통의 약 18%를 차지하고 있으며, 연평균 15% 이상의 성장률을 보이고 있습니다.

        ## 주요 온라인 판매 채널 분석

        ### 1. 종합 이커머스 플랫폼

        **특징:**
        - 넓은 소비자 기반과 높은 트래픽
        - 다양한 제품과의 경쟁
        - 플랫폼 수수료 및 광고 비용 발생

        **주요 플랫폼:**
        - 쿠팡, 11번가, G마켓 등

        **적합한 제품:**
        - 표준화된 품질의 대량 생산 농산물
        - 가격 경쟁력이 있는 제품

        ### 2. 식품 전문 플랫폼

        **특징:**
        - 식품에 관심 있는 타겟 소비자 접근
        - 상대적으로 낮은 가격 경쟁
        - 신선도와 품질 중심의 마케팅 가능

        **주요 플랫폼:**
        - 마켓컬리, 헬로네이처, 오아시스 등

        **적합한 제품:**
        - 프리미엄 농산물
        - 특산품, 제철 농산물

        ### 3. 직영 온라인 스토어

        **특징:**
        - 브랜드 아이덴티티 완전한 통제
        - 고객 데이터 직접 확보
        - 초기 투자 및 마케팅 비용 필요

        **구축 방법:**
        - 자체 쇼핑몰 구축
        - 소셜 커머스 활용

        **적합한 제품:**
        - 스토리텔링이 강한 제품
        - 구독 모델에 적합한 정기 배송 상품

        ### 4. 소셜 미디어 판매

        **특징:**
        - 낮은 진입 장벽
        - 직접적인 소비자 소통
        - 바이럴 마케팅 가능성

        **주요 채널:**
        - 인스타그램, 페이스북, 카카오톡 등

        **적합한 제품:**
        - 시각적으로 매력적인 제품
        - 한정판, 시즌 한정 제품

        ## 채널별 성공 전략

        ### 종합 이커머스 플랫폼

        - 검색 최적화(SEO) 및 키워드 전략
        - 리뷰 관리 및 평점 향상
        - 프로모션 및 할인 전략

        ### 식품 전문 플랫폼

        - 품질 인증 및 스토리텔링 강화
        - 신선도 보장 시스템 구축
        - 시즌별 특화 상품 개발

        ### 직영 온라인 스토어

        - 차별화된 고객 경험 제공
        - 구독 모델 및 충성도 프로그램
        - 콘텐츠 마케팅을 통한 트래픽 확보

        ### 소셜 미디어 판매

        - 시각적으로 매력적인 콘텐츠 제작
        - 인플루언서 협업
        - 실시간 소통 및 커뮤니티 구축
      `,
    },
  ],
  week4: [
    {
      id: "m4-1",
      title: "농산물 B2B 사업 모델 개발",
      description: "농산물 B2B 시장 진출을 위한 사업 모델 개발 방법론과 성공 사례입니다.",
      date: "2025-06-06",
      type: "PDF",
      size: "4.5MB",
      tags: ["B2B", "사업 모델"],
      content: `
        # 농산물 B2B 사업 모델 개발

        ## 농산물 B2B 시장 개요

        농산물 B2B 시장은 식품 제조업체, 식자재 유통업체, 외식 프랜차이즈, 급식 업체 등 다양한 기업 고객을 대상으로 하는 시장입니다. 국내 농산물 B2B 시장 규모는 약 25조원으로 추정되며, 안정적인 수요와 대량 거래가 특징입니다.

        ## B2B 사업 모델 유형

        ### 1. 식자재 공급 모델

        **특징:**
        - 식당, 카페, 베이커리 등에 식자재 공급
        - 정기적인 배송 시스템 구축
        - 품질 일관성과 안정적 공급이 핵심

        **주요 고객:**
        - 외식업체, 카페, 베이커리
        - 소규모 식품 제조업체

        **수익 모델:**
        - 마진 기반 판매
        - 구독형 정기 배송 서비스

        ### 2. 식품 제조업체 공급 모델

        **특징:**
        - 대량의 원재료 공급
        - 계약 재배를 통한 안정적 공급
        - 품질 규격화 및 표준화 필요

        **주요 고객:**
        - 식품 제조업체
        - 가공식품 생산업체

        **수익 모델:**
        - 장기 공급 계약
        - 계절별 가격 변동을 고려한 계약 구조

        ### 3. 급식 공급 모델

        **특징:**
        - 학교, 기업, 병원 등 단체 급식 시장 공략
        - 엄격한 품질 관리 및 안전성 보장
        - 대량 공급 능력 필요

        **주요 고객:**
        - 학교, 기업 구내식당
        - 병원, 요양 시설
        - 급식 전문 업체

        **수익 모델:**
        - 입찰 및 계약 기반
        - 정부 지원 사업 연계

        ### 4. 농산물 중개 플랫폼 모델

        **특징:**
        - 생산자와 기업 구매자를 연결하는 플랫폼
        - 거래 효율성 및 투명성 제고
        - 물류 및 품질 관리 서비스 제공

        **주요 고객:**
        - 생산자(공급자)
        - 기업 구매자(수요자)

        **수익 모델:**
        - 거래 수수료
        - 부가 서비스 판매(물류, 품질 인증 등)

        ## B2B 사업 모델 개발 프로세스

        1. **시장 조사 및 분석**
           - 타겟 B2B 시장 규모 및 성장성 분석
           - 경쟁 환경 및 진입 장벽 파악
           - 잠재 고객의 니즈 및 구매 행동 분석

        2. **가치 제안 개발**
           - 차별화된 가치 제안 도출
           - 핵심 경쟁 우위 요소 정의
           - 가격 전략 수립

        3. **공급망 설계**
           - 안정적 생산 및 조달 체계 구축
           - 품질 관리 시스템 개발
           - 물류 및 배송 시스템 설계

        4. **영업 전략 수립**
           - 타겟 고객 세분화 및 우선순위 설정
           - 영업 프로세스 및 도구 개발
           - 계약 및 가격 협상 전략

        5. **운영 모델 설계**
           - 조직 구조 및 인력 계획
           - 핵심 프로세스 및 시스템 설계
           - 성과 측정 및 관리 체계

        ## 성공 사례 분석

        ### 사례 1: 농업회사법인 ○○

        계약 재배 모델을 통해 대형 식품 제조업체에 안정적으로 원재료를 공급하는 사업 모델을 구축했습니다. 품질 표준화 시스템과 이력 추적 시스템을 도입하여 프리미엄 공급자로 포지셔닝에 성공했습니다.

        ### 사례 2: 농산물 B2B 플랫폼 ○○

        생산자와 외식업체를 직접 연결하는 디지털 플랫폼을 개발하여, 중간 유통 단계를 축소하고 신선한 농산물을 합리적인 가격에 공급하는 모델을 구축했습니다. 품질 인증 시스템과 빠른 배송 서비스를 통해 차별화에 성공했습니다.
      `,
    },
    {
      id: "m4-2",
      title: "농산물 비즈니스 혁신 사례 연구",
      description: "국내외 농산물 비즈니스의 혁신 사례와 성공 요인 분석 자료입니다.",
      date: "2025-06-08",
      type: "PDF",
      size: "5.3MB",
      tags: ["혁신", "사례 연구"],
      content: `
        # 농산물 비즈니스 혁신 사례 연구

        ## 디지털 혁신 사례

        ### 사례 1: 팜링크(FarmLink) - 미국

        **혁신 모델:**
        데이터 기반 농산물 직거래 플랫폼

        **주요 특징:**
        - 빅데이터와 AI를 활용한 수요-공급 매칭
        - 블록체인 기반 이력 추적 시스템
        - 실시간 가격 정보 및 시장 동향 제공

        **성공 요인:**
        - 데이터 기반의 의사결정 지원
        - 투명한 거래 시스템 구축
        - 생산자와 구매자 간 직접 연결을 통한 가치 창출

        ### 사례 2: 농사펀드 - 한국

        **혁신 모델:**
        크라우드펀딩 기반 농산물 선구매 플랫폼

        **주요 특징:**
        - 소비자가 농산물 생산에 선투자하고 수확 후 농산물 수령
        - 생산자에게 안정적인 운영 자금 제공
        - 소비자에게 프리미엄 농산물을 합리적 가격에 제공

        **성공 요인:**
        - 생산자-소비자 간 신뢰 관계 구축
        - 스토리텔링을 통한 가치 전달
        - 위험 분산 모델을 통한 상생 구조

        ## 상품 혁신 사례

        ### 사례 3: 퍼펙트데이(Perfect Day) - 미국

        **혁신 모델:**
        세포 배양 기술을 활용한 대체 유제품 개발

        **주요 특징:**
        - 동물 없이 우유 단백질을 생산하는 기술
        - 환경 영향 최소화 및 지속가능성 강조
        - 알레르기 없는 유제품 개발

        **성공 요인:**
        - 기술 혁신을 통한 새로운 시장 창출
        - 환경 및 윤리적 가치 제안
        - 식품 안전성 및 영양 가치 유지

        ### 사례 4: 농업회사법인 우리밀 - 한국

        **혁신 모델:**
        계약 재배와 가공을 결합한 수직 계열화

        **주요 특징:**
        - 국산 밀 계약 재배 시스템 구축
        - 자체 제분 및 가공 시설 운영
        - 완제품까지 일관 생산 체계

        **성공 요인:**
        - 안정적인 원료 조달 체계 구축
        - 품질 관리의 일관성 확보
        - 국산 농산물의 가치 제고

        ## 유통 혁신 사례

        ### 사례 5: 어그리스테크(AgrisTech) - 네덜란드

        **혁신 모델:**
        IoT 기반 콜드체인 물류 시스템

        **주요 특징:**
        - 센서를 통한 실시간 온습도 모니터링
        - AI 기반 최적 물류 경로 설계
        - 블록체인 기반 이력 추적

        **성공 요인:**
        - 신선도 유지를 통한 가치 손실 최소화
        - 투명한 공급망 관리
        - 데이터 기반 물류 최적화

        ### 사례 6: 헬로네이처 - 한국

        **혁신 모델:**
        산지 직송 신선식품 새벽배송

        **주요 특징:**
        - 산지에서 소비자까지 직접 연결하는 유통 구조
        - 콜드체인 시스템을 통한 신선도 유지
        - 구독 경제 모델 도입

        **성공 요인:**
        - 유통 단계 축소를 통한 신선도 및 가격 경쟁력 확보
        - 편의성 극대화를 통한 고객 경험 향상
        - 정기 구매를 통한 안정적 수요 확보

        ## 마케팅 혁신 사례

        ### 사례 7: 어글리 프루트(Ugly Fruit) - 영국

        **혁신 모델:**
        외관 불량 농산물의 가치 재창출

        **주요 특징:**
        - 외관상 결함이 있는 농산물을 할인된 가격에 판매
        - 음식물 쓰레기 감소 및 환경 보호 메시지 전달
        - 소비자 인식 변화 캠페인 전개

        **성공 요인:**
        - 사회적 가치와 경제적 가치의 결합
        - 스토리텔링을 통한 차별화
        - 지속가능성에 대한 소비자 니즈 충족

        ### 사례 8: 농부의 아침 - 한국

        **혁신 모델:**
        생산자 스토리텔링 기반 브랜딩

        **주요 특징:**
        - 생산자의 얼굴과 스토리를 전면에 내세운 마케팅
        - SNS를 통한 농장 일상 공유
        - 소비자와의 직접 소통 강화

        **성공 요인:**
        - 신뢰 기반의 브랜드 구축
        - 감성적 연결을 통한 고객 충성도 확보
        - 차별화된 브랜드 아이덴티티 구축

        ## 혁신 성공 요인 종합 분석

        1. **고객 중심 접근**
           - 소비자 니즈의 정확한 이해
           - 편의성과 가치 제공에 집중
           - 고객 경험 전반의 혁신

        2. **기술 활용**
           - 디지털 기술을 통한 효율성 향상
           - 데이터 기반 의사결정
           - 신기술을 통한 차별화

        3. **가치 제안의 명확성**
           - 핵심 가치의 명확한 전달
           - 일관된 브랜드 메시지
           - 가치와 가격의 균형

        4. **협력 생태계 구축**
           - 다양한 이해관계자와의 협력
           - 상생 구조 설계
           - 지속가능한 비즈니스 모델 구축

        5. **적응성과 민첩성**
           - 시장 변화에 대한 빠른 대응
           - 지속적인 혁신과 개선
           - 실패로부터의 학습과 피봇
      `,
    },
  ],
}

export function MaterialList() {
  const [selectedMaterial, setSelectedMaterial] = useState<any>(null)

  const formatDate = (dateString: string) => {
    const date = new Date(dateString)
    return `${date.getFullYear()}년 ${date.getMonth() + 1}월 ${date.getDate()}일`
  }

  const handleViewMaterial = (material: any) => {
    setSelectedMaterial(material)
  }

  const handleCloseMaterial = () => {
    setSelectedMaterial(null)
  }

  const renderMaterialCards = (materials: any[]) => {
    return materials.map((material) => (
      <Card key={material.id} className="overflow-hidden">
        <CardHeader className="pb-3">
          <CardTitle className="text-xl">{material.title}</CardTitle>
          <CardDescription className="mt-2">{material.description}</CardDescription>
        </CardHeader>
        <CardContent className="pb-3">
          <div className="space-y-2 text-sm">
            <div className="flex items-center text-muted-foreground">
              <Calendar className="mr-2 h-4 w-4" />
              <span>등록일: {formatDate(material.date)}</span>
            </div>
            <div className="flex items-center text-muted-foreground">
              <FileText className="mr-2 h-4 w-4" />
              <span>
                파일 형식: {material.type} ({material.size})
              </span>
            </div>
            <div className="flex flex-wrap gap-2 mt-3">
              {material.tags.map((tag: string) => (
                <Badge key={tag} variant="outline" className="flex items-center">
                  <Tag className="mr-1 h-3 w-3" />
                  {tag}
                </Badge>
              ))}
            </div>
          </div>
        </CardContent>
        <CardFooter className="flex justify-between pt-0">
          <Button variant="outline" size="sm" onClick={() => {}}>
            <Download className="mr-2 h-4 w-4" />
            다운로드
          </Button>
          <Button size="sm" onClick={() => handleViewMaterial(material)}>
            <Eye className="mr-2 h-4 w-4" />
            자료 보기
          </Button>
        </CardFooter>
      </Card>
    ))
  }

  return (
    <>
      <Tabs defaultValue="week1" className="w-full">
        <TabsList className="grid grid-cols-4 mb-4">
          <TabsTrigger value="week1">1주차</TabsTrigger>
          <TabsTrigger value="week2">2주차</TabsTrigger>
          <TabsTrigger value="week3">3주차</TabsTrigger>
          <TabsTrigger value="week4">4주차</TabsTrigger>
        </TabsList>
        <TabsContent value="week1" className="space-y-4">
          <div className="grid gap-4 md:grid-cols-2">{renderMaterialCards(weeklyMaterials.week1)}</div>
        </TabsContent>
        <TabsContent value="week2" className="space-y-4">
          <div className="grid gap-4 md:grid-cols-2">{renderMaterialCards(weeklyMaterials.week2)}</div>
        </TabsContent>
        <TabsContent value="week3" className="space-y-4">
          <div className="grid gap-4 md:grid-cols-2">{renderMaterialCards(weeklyMaterials.week3)}</div>
        </TabsContent>
        <TabsContent value="week4" className="space-y-4">
          <div className="grid gap-4 md:grid-cols-2">{renderMaterialCards(weeklyMaterials.week4)}</div>
        </TabsContent>
      </Tabs>

      {selectedMaterial && <MaterialDetail material={selectedMaterial} onClose={handleCloseMaterial} />}
    </>
  )
}
